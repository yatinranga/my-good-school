<div class="container-fluid">
    <div class="activity-card">
        <div class="table_main">
            <table class="table">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">STUDENT NAME</th>
                        <th scope="col">GRADE</th>
                        <th scope="col">PERFORMED ACTIVITY </th>
                        <th scope="col">ACTIVITY TITLE</th>
                        <th scope="col">PERFORMED ACTIVITY DATE </th>
                        <th scope="col" >STATUS
                            <button name="sort" class="icon_button" (click)="sortByStatus()">
                                <i class="fa fa-sort"></i>
                            </button>
                        </th>
                        <!-- <th scope="col" *ngIf="!(activityType === 'Reviewed')">STATUS
                            <button *ngIf="activityType === 'All'" name="sort" class="icon_button"
                                (click)="sortByStatus()">
                                <i class="fa fa-sort"></i>
                            </button>
                        </th>
                        <th scope="col" *ngIf="(activityType === 'Reviewed')">STATUS
                            <button *ngIf="activityType === 'All'" name="sort" class="icon_button"
                                (click)="sortByStatus()">
                                <i class="fa fa-sort"></i>
                            </button>
                        </th>
                        <th *ngIf="!(activityType === 'Reviewed')">ACTION</th> -->
                        <th scope="col"> <i class="fa fa-paperclip" title="Attachment" aria-hidden="true"></i> </th>
                    </tr>
                </thead>
                <tbody id="accordionExample">
                    <ng-container *ngFor="let activity of performedActiArr; let i = index;">
                        <tr data-toggle="collapse" [attr.data-target]="'#collapse'+i">
                            <td>{{i+1}}</td>
                            <td>{{activity.studentName}} </td>
                            <td>{{activity.grade}}</td>
                            <td>{{activity.activityName}}</td>
                            <td>{{activity.title}}</td>
                            <td>{{activity.dateOfActivity | date}}</td>
                            <td>
                                <div *ngIf="activity.activityStatus === 'SubmittedByStudent'" class="pending">
                                    Pending</div>
                                <div *ngIf="activity.activityStatus === 'SavedByTeacher'" class="saved">
                                    Saved
                                </div>
                                <div *ngIf="activity.activityStatus === 'Reviewed'" class="reviewed">
                                    Reviewed
                                </div>
                            </td>
                            <!-- <td *ngIf="!(activityType === 'Reviewed')" (click)="stopCollapse($event)">
                                <div *ngIf="(activityType === 'All') && (activity.activityStatus !== 'Reviewed')">
                                    <button name="submitSavedActivity"
                                        [disabled]="!(activity.activityStatus === 'SavedByTeacher')"
                                        (click)="submitSavedActivity(activity,i, $event)" class="submitted icon_button">
                                        <i class="fa fa-paper-plane" title="Submit"> </i> </button>
                                    <button name="editSavedActivity"
                                        [disabled]="!(activity.activityStatus === 'SavedByTeacher')"
                                        (click)="editSavedActivity(activity,i, $event)" class="saved icon_button">
                                        <i class="fa fa-edit" title="Edit"> </i> </button>
                                    <button name="reviewActivity"
                                        [disabled]="!(activity.activityStatus === 'SubmittedByStudent')"
                                        (click)="reviewActivity(activity,i, $event)" class="pending icon_button">
                                        <i class="fa fa-comments" title="Review"></i> </button>
                                </div>
        
                                <div *ngIf="activityType === 'Pending'">
                                    <button name="reviewActivity" (click)="reviewActivity(activity,i, $event)"
                                        class="pending icon_button"> <i class="fa fa-comments" title="Review"></i>
                                    </button>
                                </div>
        
                                <div *ngIf="activityType === 'Saved'">
                                    <button name="submitSavedActivity" (click)="submitSavedActivity(activity,i, $event)"
                                        class="submitted icon_button">
                                        <i class="fa fa-paper-plane" title="Submit"> </i> </button>
                                    <button name="editSavedActivity" (click)="editSavedActivity(activity,i, $event)"
                                        class="saved icon_button"> <i class="fa fa-edit" title="Edit">
                                        </i> </button>
                                </div>
                                <div *ngIf="(activityType === 'All') && (activity.activityStatus === 'Reviewed')">
                                    NA </div>
                            </td> -->
                            <td>
                                <span class="pull-right" *ngIf="activity.fileResponses.length">
                                    <i class="fa fa-paperclip" title="Attachment" aria-hidden="true"></i>
                                </span>
                            </td>
                        </tr>
                        <tr>
                            <td class="collapse-td" colspan="10">
                                <div [attr.id]="'collapse' + i " class="collapse" data-parent="#accordionExample">
                                    <div class="container-fluid mb-3" *ngIf="(activity.activityStatus != 'SubmittedByStudent')">
                                        <div class="row">
                                            <div class="col-3">
                                                <div class="description">
                                                    <h5> Activity Details : </h5>
                                                    <p> <strong> Description - </strong>
                                                        {{activity.description}} </p>
        
                                                </div>
                                            </div>
                                            <div class="col-3">
                                                <div class="description">
                                                    <h5> Reviews : </h5>
                                                    <p> <strong style="color: green">Remarks -
                                                        </strong>{{activity.coachRemark}}</p>
                                                    <p> <strong> Reviewed Date -
                                                        </strong>{{activity.coachRemarkDate | date }} </p>
                                                </div>
                                            </div>
                                            <div class="col-3">
                                                <div class="description">
                                                    <h5> Scoring : </h5>
                                                    <p> <strong>Participation Score -
                                                        </strong>{{activity.participationScore}}</p>
                                                    <p> <strong>Initiative Score -
                                                        </strong>{{activity.initiativeScore}}</p>
                                                    <p> <strong>Achievement Score -
                                                        </strong>{{activity.achievementScore}}</p>
                                                    <p> <strong>Total Score -
                                                        </strong>{{activity.totalMarks}} </p>
                                                    <p> <strong>Star - </strong>{{activity.star}}</p>
                                                </div>
                                            </div>
                                            <div class="col-3" *ngIf="activity.fileResponses.length">
                                                <div class="attachment">
                                                    <h5> Attachments : </h5>
                                                    {{activity.fileResponses.length ? "" : "NA"}}
                                                    <ul>
                                                        <li *ngFor="let file of activity.fileResponses">
        
                                                            <a [attr.href]="BASE_URL + file.url">
                                                                <i class="fa fa-file-audio" *ngIf="file.extension == 'mp3'"></i>
                                                                <i class="fa fa-image" *ngIf="file.extension=='jpg'"></i>
                                                                <i class="fa fa-video-camera"
                                                                    *ngIf="file.extension=='video'"></i>
                                                                {{file.name}}
                                                            </a>
        
                                                        </li>
                                                    </ul>
        
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="container-fluid mb-3"
                                        *ngIf="(activity.activityStatus === 'SubmittedByStudent')">
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="description">
                                                    <h5> Activity Details : </h5>
                                                    <p> <strong> Description - </strong>
                                                        {{activity.description}} </p>
                                                </div>
                                            </div>
                                            <div class="col-6" *ngIf="activity.fileResponses.length">
                                                <div class="attachment">
                                                    <h5> Attachments : </h5>
                                                    {{activity.fileResponses.length ? "" : "NA"}}
                                                    <ul>
                                                        <li *ngFor="let file of activity.fileResponses">
        
                                                            <a [attr.href]="BASE_URL + file.url">
                                                                <i class="fa fa-file-audio" *ngIf="file.extension == 'mp3'"></i>
                                                                <i class="fa fa-image" *ngIf="file.extension=='jpg'"></i>
                                                                <i class="fa fa-video-camera"
                                                                    *ngIf="file.extension=='video'"></i>
                                                                {{file.name}}
                                                            </a>
        
                                                        </li>
                                                    </ul>
        
                                                </div>
                                            </div>
        
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </ng-container>
                </tbody>
                <tfoot *ngIf="performedActiArr.length == 0">
                    <tr>
                        <td colspan="10">
                            <div *ngIf="acti_loader" class="spinner-border text-dark" role="status">
                            </div>{{acti_loader ? 'Loading...' : 'No Activities'}}
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>